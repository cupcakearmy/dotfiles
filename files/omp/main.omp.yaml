# yaml-language-server: $schema=https://raw.githubusercontent.com/JanDeDobbeleer/oh-my-posh/main/themes/schema.json

version: 2

common:
  diamond: &diamond
    style: diamond
    leading_diamond: ""
    trailing_diamond: ""
  diamond_prefix: &diamond_prefix
    style: diamond
    leading_diamond: ""
  dynamic: &dynamic
    style: dynamic
    leading_diamond: ""
    trailing_diamond: ""
    background: "p:main-10"
    foreground: "p:main-70"
  powerline: &powerline
    style: powerline
    powerline_symbol: ""

blocks:
  - alignment: left
    segments:
      - type: os
        <<: *diamond_prefix
        background: "p:main-5"
        foreground: "p:main-70"

      - type: root
        template: "  "
        properties:
          style: full
        <<: *powerline
        background: "p:error-15"
        foreground: "p:main-70"

      - type: path
        template: " {{ .Path }} "
        properties:
          style: full
        <<: *powerline
        background: "p:main-40"
        foreground: "p:main-0"

      - type: git
        template: " {{ .HEAD }} "
        <<: *powerline
        background: "p:warning-10"
        foreground: "p:main-70"
    type: prompt

  - alignment: right
    segments:
      # ENVS
      - type: python
        <<: *dynamic
      - type: go
        <<: *dynamic
      - type: node
        <<: *dynamic
      - type: kubectl
        template: "{{ .Context }}{{ if .Namespace }}::{{ .Namespace }}{{ end }}"
        <<: *dynamic
      - type: docker
        template: "{{ .Icon }} {{ .Server }}"
        <<: *dynamic
      - type: rust
        <<: *dynamic
      - type: battery
        <<: *dynamic

      # STATIC UTILITY
      - type: exit
        template: "{{ .Code }}"
        properties:
          always_enabled: true
        <<: *diamond_prefix
        background: "p:main-10"
        foreground: "p:main-70"

      - type: executiontime
        properties:
          style: round
          always_enabled: true
        <<: *powerline
        background: "p:main-5"
        foreground: "p:main-70"

      - type: time
        template: " {{ .CurrentDate | date .Format }} "
        properties:
          time_format: "15:04:05"
        <<: *powerline
        background: "p:main-0"
        foreground: "p:main-70"
    type: prompt

  - alignment: left
    newline: true
    segments:
      - foreground: "p:main-15"
        foreground_templates:
          - "{{ if gt .Code 0 }}p:error-15{{ end }}"
        properties:
          always_enabled: true
        style: plain
        template: "❯ "
        type: exit
    type: prompt

# https://colorbox.io/
# Generated by ./color
palette:
  main-0: "#f7fbff"
  main-5: "#d6e6fe"
  main-10: "#b4cafd"
  main-15: "#95a9fc"
  main-20: "#7783fa"
  main-30: "#5348f4"
  main-40: "#4826e8"
  main-50: "#3e10ca"
  main-60: "#22036e"
  main-70: "#020008"
  error-0: "#ff4040"
  error-5: "#f03a34"
  error-10: "#e23629"
  error-15: "#d33220"
  error-20: "#c52e18"
  error-30: "#a8280d"
  error-40: "#8a2106"
  error-50: "#6d1b02"
  error-60: "#501401"
  error-70: "#330d00"
  warning-0: "#ffff40"
  warning-5: "#ecf034"
  warning-10: "#dae229"
  warning-15: "#c8d320"
  warning-20: "#b6c518"
  warning-30: "#96a80d"
  warning-40: "#788a06"
  warning-50: "#5d6d02"
  warning-60: "#435001"
  warning-70: "#2a3300"
  success-0: "#40ff46"
  success-5: "#34f044"
  success-10: "#29e243"
  success-15: "#20d342"
  success-20: "#18c541"
  success-30: "#0da83d"
  success-40: "#068a36"
  success-50: "#026d2d"
  success-60: "#015022"
  success-70: "#003316"
